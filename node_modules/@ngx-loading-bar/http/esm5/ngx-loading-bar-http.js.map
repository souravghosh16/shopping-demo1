{
  "version": 3,
  "file": "ngx-loading-bar-http.js",
  "sources": [
    "ng://@ngx-loading-bar/http/out/http.module.ts",
    "ng://@ngx-loading-bar/http/out/loading-bar.http.ts"
  ],
  "sourcesContent": [
    "import { NgModule } from '@angular/core';\nimport { HttpModule, Http, XHRBackend, RequestOptions } from '@angular/http';\nimport { LoadingBarModule, LoadingBarService } from '@ngx-loading-bar/core';\nimport { LoadingBarHttp } from './loading-bar.http';\n\nexport function httpFactory(xhrBackend: XHRBackend, requestOptions: RequestOptions, loadingBarService: LoadingBarService): Http {\n  return new LoadingBarHttp(xhrBackend, requestOptions, loadingBarService);\n}\n\n@NgModule({\n  imports: [\n    HttpModule,\n    LoadingBarModule.forRoot(),\n  ],\n  exports: [\n    HttpModule,\n    LoadingBarModule,\n  ],\n  providers: [\n    { provide: Http, useFactory: httpFactory, deps: [XHRBackend, RequestOptions, LoadingBarService] },\n  ],\n})\nexport class LoadingBarHttpModule {}\n",
    "import { LoadingBarService } from '@ngx-loading-bar/core';\nimport { Injectable } from '@angular/core';\nimport { ConnectionBackend, Http, Request, RequestOptions, RequestOptionsArgs, Response } from '@angular/http';\nimport { Observable } from 'rxjs';\nimport { finalize } from 'rxjs/operators';\n\nexport interface LoadingBarRequestOptionsArgs extends RequestOptionsArgs {\n  ignoreLoadingBar?: boolean;\n}\n\n@Injectable()\nexport class LoadingBarHttp extends Http {\n  constructor(_backend: ConnectionBackend, _defaultOptions: RequestOptions, private loadingBar: LoadingBarService) {\n    super(_backend, _defaultOptions);\n  }\n\n  request(url: string | Request, options?: LoadingBarRequestOptionsArgs): Observable<Response> {\n    let headers = options && options.headers;\n    if (!headers && url && (<Request> url).headers) {\n      headers = (<Request> url).headers;\n    }\n\n    if (headers && headers.has('ignoreLoadingBar')) {\n      headers.delete('ignoreLoadingBar');\n\n      return super.request(url, options);\n    }\n\n    const response$ = super.request(url, options);\n    if (options && options.ignoreLoadingBar === true) {\n      return response$;\n    }\n\n    let started = false;\n    const responseSubscribe = response$.subscribe.bind(response$);\n    response$.subscribe = (...args) => {\n      this.loadingBar.start();\n      started = true;\n      return responseSubscribe(...args);\n    };\n\n    return response$.pipe(\n      finalize(() => started && this.loadingBar.complete()),\n    );\n  }\n}\n"
  ],
  "names": [
    "tslib_1.__extends"
  ],
  "mappings": ";;;;;;ACWA;IAAoCA,kCAAI;IACtC,wBAAY,QAA2B,EAAE,eAA+B,EAAU,UAA6B;QAA/G,YACE,kBAAM,QAAQ,EAAE,eAAe,CAAC,SACjC;QAFiF,KAApF,CAAA,UAA8F,GAAV,UAAU,CAAmB;;KAE9G;IAED,gCAAO,GAAP,UAAQ,GAAqB,EAAE,OAAsC;QAArE,iBA4BC;QA3BC,IAAI,OAAO,GAAG,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC;QACzC,IAAI,CAAC,OAAO,IAAI,GAAG,IAAI,EAAW,GAAG,GAAE,OAAO,EAAE;YAC9C,OAAO,GAAG,EAAW,GAAG,GAAE,OAAO,CAAC;SACnC;QAED,IAAI,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,EAAE;YAC9C,OAAO,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC;YAEnC,OAAO,iBAAM,OAAO,YAAC,GAAG,EAAE,OAAO,CAAC,CAAC;SACpC;QAED,IAAM,SAAS,GAAG,iBAAM,OAAO,YAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QAC9C,IAAI,OAAO,IAAI,OAAO,CAAC,gBAAgB,KAAK,IAAI,EAAE;YAChD,OAAO,SAAS,CAAC;SAClB;QAED,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,IAAM,iBAAiB,GAAG,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC9D,SAAS,CAAC,SAAS,GAAG;YAAC,cAAO;iBAAP,UAAO,EAAP,qBAAO,EAAP,IAAO;gBAAP,yBAAO;;YAC5B,KAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;YACxB,OAAO,GAAG,IAAI,CAAC;YACf,OAAO,iBAAiB,wBAAI,IAAI,GAAE;SACnC,CAAC;QAEF,OAAO,SAAS,CAAC,IAAI,CACnB,QAAQ,CAAC,cAAM,OAAA,OAAO,IAAI,KAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,GAAA,CAAC,CACtD,CAAC;KACH;;EAjCiC,IAAI;;IADxC,EAAA,IAAA,EAAC,UAAU,EAAX;;;IARA,EAAA,IAAA,EAAS,iBAAiB,GAA1B;IAAA,EAAA,IAAA,EAA2C,cAAc,GAAzD;IAFA,EAAA,IAAA,EAAS,iBAAiB,GAA1B;;ADKA,qBAA4B,UAAsB,EAAE,cAA8B,EAAE,iBAAoC;IACtH,OAAO,IAAI,cAAc,CAAC,UAAU,EAAE,cAAc,EAAE,iBAAiB,CAAC,CAAC;CAC1E;AAeD;IAAA;;;;;IAbA,EAAA,IAAA,EAAC,QAAQ,EAAT,IAAA,EAAA,CAAU;gBACR,OAAO,EAAE;oBACP,UAAU;oBACV,gBAAgB,CAAC,OAAO,EAAE;iBAC3B;gBACD,OAAO,EAAE;oBACP,UAAU;oBACV,gBAAgB;iBACjB;gBACD,SAAS,EAAE;oBACT,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,UAAU,EAAE,cAAc,EAAE,iBAAiB,CAAC,EAAE;iBAClG;aACF,EAAD,EAAA;;;;;"
}
